---
subcategory: "Index"
layout: ""
page_title: "Elasticstack: elasticstack_elasticsearch_index Resource"
description: |-
  Creates or updates an index.
---

# Resource: elasticstack_elasticsearch_index

Creates or updates an index. This resource can define settings, mappings and aliases. See: https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html

## Example Usage

```terraform
provider "elasticstack" {
  elasticsearch {}
}

resource "elasticstack_elasticsearch_index" "my_index" {
  name = "my-index"

  alias {
    name = "my_alias_1"
  }

  alias {
    name = "my_alias_2"
    filter = jsonencode({
      term = { "user.id" = "developer" }
    })
  }

  mappings = jsonencode({
    properties = {
      field1 = { type = "keyword" }
      field2 = { type = "text" }
      field3 = { properties = {
        inner_field1 = { type = "text", index = false }
        inner_field2 = { type = "integer", index = false }
      } }
    }
  })

  settings {
    setting {
      name  = "index.number_of_shards"
      value = "1"
    }
    setting {
      name  = "index.number_of_replicas"
      value = "2"
    }
    setting {
      name  = "index.search.idle.after"
      value = "20s"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String) Name of the index you wish to create.

### Optional

- **alias** (Block Set) Aliases for the index. (see [below for nested schema](#nestedblock--alias))
- **elasticsearch_connection** (Block List, Max: 1) Used to establish connection to Elasticsearch server. Overrides environment variables if present. (see [below for nested schema](#nestedblock--elasticsearch_connection))
- **mappings** (String) Mapping for fields in the index.
If specified, this mapping can include: field names, field data types (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html), mapping parameters (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-params.html).
**NOTE:** changing datatypes in the existing _mappings_ will force index to be re-created.
- **settings** (Block List, Max: 1) Configuration options for the index. See, https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#index-modules-settings.
**NOTE:** Static index settings (see: https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#_static_index_settings) can be only set on the index creation and later cannot be removed or updated - _apply_ will return error (see [below for nested schema](#nestedblock--settings))

### Read-Only

- **id** (String) Internal identifier of the resource
- **settings_raw** (String) All raw settings fetched from the cluster.

<a id="nestedblock--alias"></a>
### Nested Schema for `alias`

Required:

- **name** (String) Index alias name.

Optional:

- **filter** (String) Query used to limit documents the alias can access.
- **index_routing** (String) Value used to route indexing operations to a specific shard. If specified, this overwrites the `routing` value for indexing operations.
- **is_hidden** (Boolean) If true, the alias is hidden.
- **is_write_index** (Boolean) If true, the index is the write index for the alias.
- **routing** (String) Value used to route indexing and search operations to a specific shard.
- **search_routing** (String) Value used to route search operations to a specific shard. If specified, this overwrites the routing value for search operations.


<a id="nestedblock--elasticsearch_connection"></a>
### Nested Schema for `elasticsearch_connection`

Optional:

- **ca_file** (String) Path to a custom Certificate Authority certificate
- **endpoints** (List of String, Sensitive) A list of endpoints the Terraform provider will point to. They must include the http(s) schema and port number.
- **insecure** (Boolean) Disable TLS certificate validation
- **password** (String, Sensitive) A password to use for API authentication to Elasticsearch.
- **username** (String) A username to use for API authentication to Elasticsearch.


<a id="nestedblock--settings"></a>
### Nested Schema for `settings`

Required:

- **setting** (Block Set, Min: 1) Defines the setting for the index. (see [below for nested schema](#nestedblock--settings--setting))

<a id="nestedblock--settings--setting"></a>
### Nested Schema for `settings.setting`

Required:

- **name** (String) The name of the setting to set and track.
- **value** (String) The value of the setting to set and track.

## Import

**NOTE:** While importing index resource, keep in mind, that some of the default index settings will be imported into the TF state too.
You can later adjust the index configuration to account for those imported settings.

Some of the default settings, which could be imported are: `index.number_of_replicas`, `index.number_of_shards` and `index.routing.allocation.include._tier_preference`.

Import is supported using the following syntax:

```shell
# NOTE: while importing index resource, keep in mind, that some of the default index settings will be imported into the TF state too
# You can later adjust the index configuration to account for those imported settings
terraform import elasticstack_elasticsearch_index.my_index <cluster_uuid>/<index_name>
```
